```rust
/// buddy_system_allocator:
/// Add a range of memory [start, end) to the heap
pub unsafe fn add_to_heap(&mut self, mut start: usize, mut end: usize) {
	// 向高地址对齐
	start = (start + size_of::<usize>() - 1) & (!size_of::<usize>() + 1);
	// 向低地址对齐
	end = end & (!size_of::<usize>() + 1);
	assert!(start <= end);

	let mut total = 0;
	let mut current_start = start;

	while current_start + size_of::<usize>() <= end {
		// 取低位的比特 1
		let lowbit = current_start & (!current_start + 1);
		// 一次分配多少内存(核心)
		let size = min(lowbit, prev_power_of_two(end - current_start));
		total += size;

		self.free_list[size.trailing_zeros() as usize].push(current_start as *mut usize);
		current_start += size;
	}

	self.total += total;
}
```
